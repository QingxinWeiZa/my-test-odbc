import{h as w,_ as A,b as D,a as O,c as U,d as z,e as M,F as P,C as Y,g as S,p as G}from"./http-DzxoruXy.js";import{u as T,e as H,r as u,d as J,o as K,i as s,j as p,k as e,l as n,b as t,s as v,q as _,F as x,v as Q,y as W,z as X,A as Z,_ as ee}from"./index-BtU2wmtS.js";import{B as te}from"./index-BPRX2Vsd.js";function ae(){return[{key:"0",dataIndex:"shutoriTenpo",title:"下取店舗",width:"25%",align:"center"},{key:"1",dataIndex:"satteYard",title:"幸手ヤード",width:"25%",align:"center"},{key:"2",dataIndex:"iwatsukiCenter",title:"岩槻センター",width:"25%",align:"center"},{key:"3",dataIndex:"tenpo",title:"店舗",width:"25%",align:"center"}]}function ne(o){const r=T();return w.request({url:"/api/ltStandard/get",params:{cdTenpo:r.userInfo.cdTenpo},method:"get"},o)}function oe(o,r){const f=T();return w.request({url:"/api/ltStandard/update",data:Object.assign({cdTenpo:f.userInfo.cdTenpo},o)},r)}const se=o=>(W("data-v-c5a834d3"),o=o(),X(),o),re=se(()=>Z("h3",{class:"font-600"},"L/T基準値",-1)),de=H({__name:"index",setup(o){const r=u(),f=u(),B=J(()=>{const a=ae();return a.push({key:"action",title:"操作",width:c.value?160:100,align:"center"}),a}),m=u(!1),g=u([]),c=u(!1),d=u({});function b(){d.value={},c.value=!1}function R(){d.value=Object.assign({},g.value[0]),c.value=!0}function F(){r.value.validateFields().then(()=>{oe(d.value,m).then(a=>{a.success&&a.data&&(b(),h())})})}function h(){ne(m).then(a=>{a.success&&a.data&&(g.value=[a.data])})}return K(()=>{h()}),(a,l)=>{const C=A,y=te,I=D,L=O,N=U,$=z,j=M,q=P,E=Y;return s(),p(C,null,{default:e(()=>[n(E,{ref_key:"tableCardRef",ref:f},{title:e(()=>[n(C,{justify:"space-between",align:"center"},{default:e(()=>[re]),_:1})]),default:e(()=>[n(q,{name:"salesPlan",ref_key:"formRef",ref:r,model:t(d),layout:"inline"},{default:e(()=>[n(j,{tableLayout:"fixed",bordered:"","text-align":"center",columns:t(B),"data-source":t(g),pagination:!1,loading:t(m)},{bodyCell:e(({column:i,record:le,value:V})=>[i.key=="action"?(s(),v(x,{key:0},[t(c)?(s(),p(L,{key:0},{default:e(()=>[n(I,{title:"保存しますか？",onConfirm:l[0]||(l[0]=k=>F()),"ok-text":"確認"},{default:e(()=>[n(y,{type:"primary"},{default:e(()=>[_("保存")]),_:1})]),_:1}),n(I,{title:"変更を破棄しますか？",onConfirm:l[1]||(l[1]=k=>b()),"ok-text":"確認"},{default:e(()=>[n(y,null,{default:e(()=>[_("破棄")]),_:1})]),_:1})]),_:1})):(s(),p(y,{key:1,type:"primary",onClick:l[2]||(l[2]=()=>R())},{default:e(()=>[_("編集")]),_:1}))],64)):(s(),v(x,{key:1},[t(c)?(s(),p($,{key:0,name:`${i.dataIndex}`,rules:{required:!0,message:"必須項目です。"}},{default:e(()=>[n(N,{value:t(d)[`${i.dataIndex}`],"onUpdate:value":k=>t(d)[`${i.dataIndex}`]=k,class:"table-inline-input",controls:!1,keyboard:!1,precision:0,formatter:t(S),parser:t(G)},null,8,["value","onUpdate:value","formatter","parser"])]),_:2},1032,["name"])):(s(),v(x,{key:1},[_(Q(t(S)(V)),1)],64))],64))]),_:1},8,["columns","data-source","loading"])]),_:1},8,["model"])]),_:1},512)]),_:1})}}}),pe=ee(de,[["__scopeId","data-v-c5a834d3"]]);export{pe as default};
